# 代理IP及爬虫应用



## IP地址

IP地址指的就是互联网协议地址。IP地址是IP协议提供的一种统一的地址格式，它为互联网上的每一个网络和每一台主机分配一个逻辑地址，以此来屏蔽物理地址的差异。

也就是说，IP地址是网络中主机的门牌号，以此来确定主机在网络中的位置。

IP地址是一个32位的二进制数，通常被分割为4个“**8位二进制数**”（也就是4个字节）。IP地址通常用“**点分十进制**”表示成（a.b.c.d）的形式，其中，a,b,c,d都是0~255之间的十进制整数。

例：点分十进IP地址（100.4.5.6），实际上是32位二进制数（01100100.00000100.00000101.00000110）。

而有一些IP地址是有特殊作用的。比如127.0.0.1，指的就是本机的地址，常常等同于localhost。还有192.168开头的IP地址，常常用来做本地局域网内的地址。



## 代理服务器

代理其实就是一种特殊的网络服务，允许一个网络终端通过代理与另一个网络终端进行非直接的连接。

而代理服务器指的就是提供代理这种服务的服务器。

![image-20180527005329386](代理IP及爬虫应用.assets/image-20180527005329386.png)

对于我们爬虫的来说，代理服务器最大的作用就是隐藏我们真实的IP地址。代理服务器就像是一个中间人一样，我们将我们的请求首先发送给代理服务器，然后代理服务器会自动帮我们转发这个请求给我们的目标服务器，目标服务器接收到请求后，识别请求的IP地址正常，就会将响应返回给代理服务器，然后代理服务器再把请求返回给我们。

在这个过程中，目标服务器识别到的这次请求的IP地址就会是代理服务器的IP地址，而不是我们的。



## 代理IP

最后，代理IP指的就是代理服务器的IP地址，我们既然要让代理服务器给我们转发请求，那么我们首先就要访问这个代理服务器，所以需要它的IP地址。

代理IP后面又基本上跟着一个端口号，那么指的其实就是，我们将请求访问到这个IP地址的这个指定端口，那么这个代理服务器就会为我们转发请求。



## 代理IP的匿名程度

- 高度匿名代理

  高度匿名代理会将数据包原封不动的转发，在服务端看来就好像真的是一个普通客户端在访问，而记录的IP是代理服务器的IP。

- 普通匿名代理

  普通匿名代理会在数据包上做一些改动，服务端上有可能发现这是个代理服务器，也有一定几率追查到客户端的真实IP。代理服务器通常会加入的HTTP头有HTTP_VIA和HTTP_X_FORWARDED_FOR 。

- 透明代理

  透明代理不但改动了数据包，还会告诉服务器客户端的真实IP。这种代理除了能用缓存技术提高浏览速度，能用内容过滤提高安全性之外，并无其他显著作用。（最常见的例子是：内网中的硬件防火墙。

- 间谍代理

  间谍代理指组织或个人创建的，用于记录用户传输的数据，然后进行研究、监控等目的代理服务器。

 

## 代理IP池的架构

在我们大规模爬取数据的过程中，一两个代理IP是不足以满足我们对代理IP的需求量的，所以我们需要更多的代理IP。

那么，这个时候我们就需要一个代理IP池去为我们实现：获取代理IP，验证代理IP的有效性，存储代理IP等一系列功能。